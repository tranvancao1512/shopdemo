!function(t,i){"use strict";var o,a=function(t,o){return this.targets=i(t),this.settings=i.extend({},i.fn.tcToolTip.defaults,o),this.targets.length>0&&(this.init(),this)};i(document).ready(function(){o=t.TMEPOJS||{tm_epo_global_tooltip_max_width:"340px"}}),a.prototype={constructor:a,removeTooltip:function(o,a){var e=this.settings;o.data("is_moving")||(a.removeClass(e.fadin).addClass(e.fadeout),a.animate({opacity:0},e.speed,function(){i(this).remove()}),o.data("tmtip-title")&&void 0===o.data("tm-tip-html")&&!o.attr("data-tm-tooltip-html")&&o.attr("title",o.data("tmtip-title")),i(t).off("scroll.tcToolTip resize.tcToolTip"))},initTooltip:function(a,e,l){var s,d,m,n,r,h,p=this.settings;a&&e&&1===a.length&&1===e.length&&1===a.data("tm-has-tm-tip")&&(1===l&&(s=void 0!==a.data("tm-tip-html")?a.data("tm-tip-html"):a.attr("data-tm-tooltip-html")?a.attr("data-tm-tooltip-html"):a.attr("title"),e.html(s),a.data("is_moving",!0)),e.find("aside").hide(),""===o.tm_epo_global_tooltip_max_width?i(t).width()<=1.2*e.outerWidth()?e.css("max-width",i(t).width()/1.2+"px"):e.css("max-width","340px"):(o.tm_epo_global_tooltip_max_width.isNumeric()&&(o.tm_epo_global_tooltip_max_width=o.tm_epo_global_tooltip_max_width+"px"),e.css("max-width",o.tm_epo_global_tooltip_max_width)),e.find("aside").show(),d=i.epoAPI.dom.scroll(),m=a.offset().left+a.outerWidth()/2-e.outerWidth()/2,n=a.offset().top-e.outerHeight()-10,r=a.offset().top-d.top-e.outerHeight()-10,h=m,m<0?(m=a.offset().left+a.outerWidth()/2-20,e.addClass("left")):e.removeClass("left"),h>=0&&m+e.outerWidth()>i(t).width()?(m=a.offset().left-e.outerWidth()+a.outerWidth()/2+20,e.addClass("right")):e.removeClass("right"),n<0||r<0?(n=a.offset().top+a.outerHeight(),e.addClass("top")):e.removeClass("top"),i(t).trigger("tm_tooltip_show"),l?(e.css({left:m,top:n}),a.data("is_moving",!1)):e.css({left:m,top:n}).removeClass(p.fadeout).addClass(p.fadin))},show:function(o){var a,e,l;if(!o.data("is_moving"))return 1===o.data("tm-has-tm-tip")&&(void 0!==o.data("tm-tip-html")?(e=o.data("tm-tip-html"),o.attr("title")&&o.data("tmtip-title",o.attr("title")),o.removeAttr("title")):o.attr("data-tm-tooltip-html")?(e=o.attr("data-tm-tooltip-html"),o.attr("title")&&o.data("tmtip-title",o.attr("title")),o.removeAttr("title")):e=o.attr("title"),void 0!==e&&(i("#tm-tooltip").remove(),(a=i('<div id="tm-tooltip" class="tm-tip tm-animated"></div>')).css("opacity",0).html(e).appendTo("body"),(l=a.find("img")).length>0&&l.on("load",this.initTooltip.bind(this,o,a)),this.initTooltip(o,a),i(t).on("scroll.tcToolTip resize.tcToolTip",this.initTooltip.bind(this,o,a)),o.data("is_moving",!1),o.on("tmmovetooltip",this.initTooltip.bind(this,o,a,1)),o.on("mouseleave tmhidetooltip",this.removeTooltip.bind(this,o,a)),o.closest("label").on("mouseleave tmhidetooltip",this.removeTooltip.bind(this,o,a)),a.on("click",this.removeTooltip.bind(this,o,a)))),!1},init:function(){var t=this;this.targets.length>0&&this.targets.toArray().forEach(function(o){var a,e,l,s,d,m,n,r,h,p,c,f,g,u,v;void 0===(a=i(o)).data("tm-has-tm-tip")&&(e=a.attr("data-tm-tooltip-swatch"),l=a.attr("data-tm-tooltip-swatch-desc"),s=a.attr("data-tm-tooltip-swatch-lbl-desc"),d=a.attr("data-tm-tooltip-swatch-img"),m=a.attr("data-tm-tooltip-swatch-img-lbl"),n=a.attr("data-tm-tooltip-swatch-img-desc"),r=a.attr("data-tm-tooltip-swatch-img-lbl-desc"),a.data("tm-has-tm-tip",1),g=void 0!==a.attr("data-original")?a.attr("data-original"):void 0!==a.attr("src")?a.attr("src"):a[0].src,0===(p=a.closest(".tmcp-field-wrap")).length&&(p=a.closest(".cpf_hide_element")),0===p.length&&(p=a.closest(".cpf-section").find(".tc-section-inner-wrap")),0===(u=p.find(".checkbox-image-label,.radio-image-label,.tm-tip-html")).length&&(u=p.next(".checkbox-image-label,.radio-image-label,.tm-tip-html")),u=i(p=u),v="yes"===a.attr("data-tm-hide-label")||void 0===a.attr("data-tm-hide-label")||u.is(".tm-tip-html"),f="",0===(c=(c=a.closest(".tmcp-field-wrap")).find("[data-tm-tooltip-html]")).length?(c=a.closest(".tmcp-field-wrap").find(".tc-inline-description")).length>0&&(f=c.html()):f=c.attr("data-tm-tooltip-html"),e?h=u.html():l?h="<aside>"+f+"</aside>":s?h="<aside>"+u.html()+"</aside><aside>"+f+"</aside>":d?h='<img src="'+g+'">':m?h='<img src="'+g+'"><aside>'+u.html()+"</aside>":n?h='<img src="'+g+'"><aside>'+f+"</aside>":r&&(h='<img src="'+g+'"><aside>'+u.html()+"</aside><aside>"+f+"</aside>"),void 0!==h&&(a.data("tm-tip-html",h),v&&u.hide()),h=a.attr("data-tm-tooltip-html")?a.attr("data-tm-tooltip-html"):a.attr("title"),a.on("tc-tooltip-html-changed",function(){a.attr("data-tm-tooltip-html")?a.show():a.hide()}),a.closest("label").on("mouseenter tmshowtooltip",t.show.bind(t,a)),a.on("mouseenter tmshowtooltip",t.show.bind(t,a)))})}},i.fn.tcToolTip=function(t){var o,e,l,s=i(this),d=s.map(function(){return i(this).data("tctooltip")||""}).get().some(function(t){return""===t});return l="object"==typeof t?t:{},d&&(e=new a(this,l),s.data("tctooltip",e)),"string"==typeof t&&(o=e[t].apply(e,[])),void 0===o?s:o},i.fn.tcToolTip.defaults={fadin:"fadeIn",fadeout:"fadeout",speed:1500},i.fn.tcToolTip.instances=[],i.fn.tcToolTip.Constructor=a,i.tcToolTip=function(t,o){var e=!1;return t=t||i(".tm-tooltip"),t.map(function(){return i(this).data("tctooltip")||""}).get().some(function(t){return""===t})&&(e=new a(t,o),t.data("tctooltip",e)),e}}(window,window.jQuery);