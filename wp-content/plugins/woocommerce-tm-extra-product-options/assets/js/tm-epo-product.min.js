!function(t,a,i){"use strict";function e(t){var e=i.getElementById("tmpl-"+t).textContent,r=!1;return r=r||/<#\s?data\./.test(e),r=r||/{{{?\s?data\.(?!variation\.).+}}}?/.test(e),(r=r||/{{{?\s?data\.variation\.[\w-]*[^\s}]/.test(e))?a.wp.template(t):function(t){var i,r=t.variation||{};return e.replace(/({{{?)\s?data\.variation\.([\w-]*)\s?(}}}?)/g,function(t,e,o,n){return e.length!==n.length?"":(i=r[o]||"",2===e.length?a.escape(i):i)})}}var r=function(t,a,i,e,r){var o=this;o.field=a,o.currentCart=i,o.variableProductContainers=e,o.epoObject=r,o.$form=t,o.$wrap=t.closest(".tc-epo-element-product-container-wrap"),o.$attributeFields=t.find(".tc-epo-variable-product-selector"),o.$singleVariation=t.find(".tc-epo-element-single-variation"),o.$resetVariations=t.find(".tc-epo-element-variable-reset-variations"),o.variationData=t.data("product_variations"),o.useAjax=!1===o.variationData,o.xhr=!1,o.loading=!0,o.variationId=t.closest(".cpf_hide_element").find(".tc-epo-element-product-container-variation-id input.product-variation-id"),o.getChosenAttributes=o.getChosenAttributes.bind(o),o.findMatchingVariations=o.findMatchingVariations.bind(o),o.isMatch=o.isMatch.bind(o),o.toggleResetLink=o.toggleResetLink.bind(o),t.on("click.tc-variation-form",".tc-epo-element-variable-reset-variations",{variationForm:o},o.onReset),t.on("tc_hide_variation",{variationForm:o},o.onHide),t.on("tc_show_variation",{variationForm:o},o.onShow),t.on("tc_reset_data",{variationForm:o},o.onResetDisplayedVariation),t.on("tc_reset_image",{variationForm:o},o.onResetImage),t.on("change.tc-variation-form",".tc-epo-variable-product-selector",{variationForm:o},o.onChange),t.on("tc_found_variation.tc-variation-form",{variationForm:o},o.onFoundVariation),t.on("tc_check_variations.tc-variation-form",{variationForm:o},o.onFindVariation),t.on("tc_update_variation_values.tc-variation-form",{variationForm:o},o.onUpdateAttributes),t.on("refresh.tc-variation-form",{variationForm:o},o.onRefreshContainer),t.on("update_field.tc-variation-form",{variationForm:o},o.onUpdateField),o.variationId.val(""),setTimeout(function(){t.trigger("refresh"),t.trigger("tc_variation_form"),o.loading=!1},100)};r.prototype.onRefreshContainer=function(t){var a=t.data.variationForm;a.variableProductContainers.find(".tc-epo-element-product-container").removeClass("variations_form"),a.$form.addClass("variations_form"),a.$form.trigger("tc_check_variations.tc-variation-form")},r.prototype.onUpdateField=function(t,a){var i,e,r,o,n,c,s=t.data.variationForm;t.preventDefault(),a||(e=i=s.field,i.is("select")&&(e=i.find("option:selected")),r=0,o=0,n=0,c=0,i.data("price_set",1),e.data("associated_price_set",1),e.data("price_set",1),e.data("raw_price",o),e.data("raw_original_price",c),e.data("price",r),e.data("original_price",n),i.data("price-changed",1),s.$form.trigger({type:"tm-epo-update",norules:2}),s.currentCart.trigger({type:"tm-epo-update",norules:2}))},r.prototype.onReset=function(t){t.preventDefault(),t.data.variationForm.$attributeFields.val("").change(),t.data.variationForm.$form.trigger("tc_reset_data")},r.prototype.onHide=function(t){t.preventDefault()},r.prototype.onShow=function(t){t.preventDefault()},r.prototype.onResetDisplayedVariation=function(t){var a=t.data.variationForm;a.$form.find(".product-meta").find(".tc-product-sku").tc_reset_content(),a.$form.trigger("tc_reset_image"),a.$singleVariation.slideUp(200).trigger("tc_hide_variation")},r.prototype.onResetImage=function(t){t.data.variationForm.$form.tc_variations_image_update(!1)},r.prototype.onFindVariation=function(a){var i,e,r=a.data.variationForm,o=r.getChosenAttributes(),n=o.data;if(o.count===o.chosenCount)if(r.useAjax){if(void 0===typeof wc_add_to_cart_variation_params)return;r.xhr&&r.xhr.abort(),i=r.$form.closest(".cpf-type-product"),r.$form.block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),n.product_id=parseInt(r.$form.data("product_id"),10),n.discount=i.attr("data-discount"),n.discount_type=i.attr("data-discount-type"),r.xhr=t.ajax({url:wc_add_to_cart_variation_params.wc_ajax_url.toString().replace("%%endpoint%%","get_variation"),type:"POST",data:n,success:function(t){t?r.$form.trigger("tc_found_variation",[t]):(r.$form.trigger("tc_reset_data"),o.chosenCount=0,r.loading||(r.$form.find(".tc-epo-element-single-variation").after('<p class="wc-no-matching-variations woocommerce-info">'+wc_add_to_cart_variation_params.i18n_no_matching_variations_text+"</p>"),r.$form.find(".wc-no-matching-variations").slideDown(200),r.$form.trigger("update_field",[])))},complete:function(){r.$form.unblock()}})}else r.$form.trigger("tc_update_variation_values"),(e=r.findMatchingVariations(r.variationData,n).shift())?r.$form.trigger("tc_found_variation",[e]):(r.$form.trigger("tc_reset_data"),o.chosenCount=0,r.loading||(r.$form.find(".tc-epo-element-single-variation").after('<p class="wc-no-matching-variations woocommerce-info">'+wc_add_to_cart_variation_params.i18n_no_matching_variations_text+"</p>"),r.$form.find(".wc-no-matching-variations").slideDown(200)));else r.variationId.val("").change(),r.$form.trigger("update_field",[]),r.$form.trigger("tc_update_variation_values"),r.$form.trigger("tc_reset_data");r.toggleResetLink(o.chosenCount>0)},r.prototype.onFoundVariation=function(a,i){var r=a.data.variationForm,o=r.$form.find(".product-meta").find(".tc-product-sku"),n=r.$wrap.find(".tm-quantity, .tm-quantity-alt"),c=n.find("input.tm-qty, input.tm-qty-alt"),s=t.epoAPI.math.toInt(c.attr("data-min")),_=t.epoAPI.math.toInt(c.attr("data-max")),d=!0,m=!1,v="";i.sku?o.tc_set_content(i.sku):o.tc_reset_content(),r.$form.tc_variations_image_update(i),m=e(i.variation_is_visible?"variation-template":"unavailable-variation-template"),r.field.attr("data-no-price")&&(i.display_price="",i.display_regular_price="",i.price_html=""),v=(v=(v=m({variation:i})).replace("/*<![CDATA[*/","")).replace("/*]]>*/",""),r.$singleVariation.html(v),r.variationId.val(i.variation_id).change(),"yes"===i.is_sold_individually?(c.val("1").attr("min","1").attr("max","1"),n.hide()):(""!==i.min_qty&&i.min_qty<s&&(s=i.min_qty),""!==i.max_qty&&i.max_qty<_&&(_=i.max_qty),s&&c.attr("min",s),_&&c.attr("max",_),_&&t.epoAPI.math.toInt(c.val())>_&&c.val(_),n.show()),i.is_purchasable&&i.is_in_stock&&i.variation_is_visible||(d=!1),t.epoAPI.util.trim(r.$singleVariation.text())?r.$singleVariation.slideDown(200).trigger("tc_show_variation",[i,d]):r.$singleVariation.show().trigger("tc_show_variation",[i,d]),r.$form.trigger("update_field",[i])},r.prototype.onChange=function(t){var a=t.data.variationForm;a.variationId.val("").change(),a.$form.find(".wc-no-matching-variations").remove(),a.useAjax?a.$form.trigger("tc_check_variations"):(a.$form.trigger("woocommerce_variation_select_change"),a.$form.trigger("tc_check_variations")),a.$form.trigger("woocommerce_variation_has_changed")},r.prototype.onUpdateAttributes=function(a){var i=a.data.variationForm,e=i.getChosenAttributes().data;i.useAjax||(i.$attributeFields.each(function(a,r){var o,n,c,s,_,d,m,v,l,g,f,p,u,h=t(r),w=h.data("attribute_name")||h.attr("name"),y=t(r).data("show_option_none"),b=":gt(0)",$=0,F=t("<select/>"),x=h.val()||"",C=!0;h.data("attribute_html")||((o=h.clone()).find("option").removeAttr("disabled attached").removeAttr("selected"),h.data("attribute_options",o.find("option"+b).get()),h.data("attribute_html",o.html())),F.html(h.data("attribute_html")),(n=t.extend(!0,{},e))[w]="",c=i.findMatchingVariations(i.variationData,n);for(s in c)if(void 0!==c[s]){m=c[s].attributes;for(v in m)if(Object.prototype.hasOwnProperty.call(m,v)&&(l=m[v],g="",v===w))if(c[s].variation_is_active&&(g="enabled"),l){if(l=t("<div/>").html(l).text(),(f=F.find("option")).length)for(_=0,d=f.length;_<d;_++)if(p=t(f[_]),u=p.val(),l===u){p.addClass("attached "+g);break}}else F.find("option:gt(0)").addClass("attached "+g)}$=F.find("option.attached").length,x&&(C=!1,0!==$&&F.find("option.attached.enabled").each(function(){var a=t(this).val();if(x===a)return C=!0,!1})),$>0&&x&&C&&"no"===y&&(F.find("option:first").remove(),b=""),F.find("option"+b+":not(.attached)").remove(),h.html(F.html()),h.find("option"+b+":not(.enabled)").prop("disabled",!0),x?C?h.val(x):h.val("").change():h.val("")}),i.$form.trigger("woocommerce_update_variation_values"))},r.prototype.getChosenAttributes=function(){var a={},i=0,e=0;return this.$attributeFields.each(function(){var r=t(this).data("attribute_name")||t(this).attr("name"),o=t(this).val()||"";o.length>0&&e++,i++,a[r]=o}),{count:i,chosenCount:e,data:a}},r.prototype.findMatchingVariations=function(t,a){var i,e,r=[];for(i=0;i<t.length;i++)e=t[i],this.isMatch(e.attributes,a)&&r.push(e);return r},r.prototype.isMatch=function(t,a){var i,e,r,o=!0;for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i=t[r],e=a[r],void 0!==i&&void 0!==e&&0!==i.length&&0!==e.length&&i!==e&&(o=!1));return o},r.prototype.toggleResetLink=function(t){t?"hidden"===this.$resetVariations.css("visibility")&&this.$resetVariations.css("visibility","visible").hide().fadeIn():this.$resetVariations.css("visibility","hidden")},t.fn.tc_product_variation_form=function(t,a,i,e){return new r(this,t,a,i,e),this.trigger("tc_product_variation_form"),this},t.fn.tc_set_content=function(t){void 0===this.attr("data-o_content")&&this.attr("data-o_content",this.text()),this.text(t)},t.fn.tc_reset_content=function(){void 0!==this.attr("data-o_content")&&this.text(this.attr("data-o_content"))},t.fn.tc_set_variation_attr=function(t,a){void 0===this.attr("data-o_"+t)&&this.attr("data-o_"+t,this.attr(t)?this.attr(t):""),!1===a?this.removeAttr(t):this.attr(t,a)},t.fn.tc_reset_variation_attr=function(t){void 0!==this.attr("data-o_"+t)&&this.attr(t,this.attr("data-o_"+t))},t.fn.tc_variations_image_update=function(t){var a=this,i=a.find(".tc-product-image, .woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),e=i.find(".wp-post-image"),r=i.find("a").eq(0);t&&t.image&&t.image.src&&t.image.src.length>1?(e.tc_set_variation_attr("src",t.image.src),e.tc_set_variation_attr("height",t.image.src_h),e.tc_set_variation_attr("width",t.image.src_w),e.tc_set_variation_attr("srcset",t.image.srcset),e.tc_set_variation_attr("sizes",t.image.sizes),e.tc_set_variation_attr("title",t.image.title),e.tc_set_variation_attr("data-caption",t.image.caption),e.tc_set_variation_attr("alt",t.image.alt),e.tc_set_variation_attr("data-src",t.image.full_src),e.tc_set_variation_attr("data-large_image",t.image.full_src),e.tc_set_variation_attr("data-large_image_width",t.image.full_src_w),e.tc_set_variation_attr("data-large_image_height",t.image.full_src_h),i.tc_set_variation_attr("data-thumb",t.image.src),r.tc_set_variation_attr("href",t.image.full_src)):a.tc_variations_image_reset()},t.fn.tc_variations_image_reset=function(){var t=this.find(".tc-product-image, .woocommerce-product-gallery__image, .woocommerce-product-gallery__image--placeholder").eq(0),a=t.find(".wp-post-image"),i=t.find("a").eq(0);a.tc_reset_variation_attr("src"),a.tc_reset_variation_attr("width"),a.tc_reset_variation_attr("height"),a.tc_reset_variation_attr("srcset"),a.tc_reset_variation_attr("sizes"),a.tc_reset_variation_attr("title"),a.tc_reset_variation_attr("data-caption"),a.tc_reset_variation_attr("alt"),a.tc_reset_variation_attr("data-src"),a.tc_reset_variation_attr("data-large_image"),a.tc_reset_variation_attr("data-large_image_width"),a.tc_reset_variation_attr("data-large_image_height"),t.tc_reset_variation_attr("data-thumb"),i.tc_reset_variation_attr("href")}}(window.jQuery,window,document);