!function(t){"use strict";function e(t,e){var a;for(a=0;a<t.length;a++)t[a]+=e;return t}function a(t,e,a,n){var h;for(h=0;h<n;h++)if(t[a+h]!==e[h])return!1;return!0}var n=function(t){this.value=t},h=["round","ceil","floor","abs","exp","sqrt","sin","cos","tan","pi","(",")","P","C","asin","acos","atan","7","8","9","int","cosh","acosh","ln","^","root","4","5","6","/","!","tanh","atanh","Mod","1","2","3","*","sinh","asinh","e","log","0",".","+","-",",","Sigma","n","Pi","pow"],o=["round","ceil","floor","abs","exp","sqrt","sin","cos","tan","&pi;","(",")","P","C","asin","acos","atan","7","8","9","Int","cosh","acosh"," ln","^","root","4","5","6","&divide;","!","tanh","atanh"," Mod ","1","2","3","&times;","sinh","asinh","e"," log","0",".","+","-",",","&Sigma;","n","&Pi;","pow"],p=[],u=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"],["pi","ln","Pi"],["round","ceil","floor","abs","exp","sqrt"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]],s=[0,0,0,0,0,0,0,0,0,3,4,5,10,10,0,0,0,1,1,1,0,0,0,0,10,0,1,1,1,2,7,0,0,2,1,1,1,2,0,0,3,0,1,6,9,9,11,12,13,12,8],l={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0},i={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0},r={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0},f={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0},v={},c={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0},y={1:!0};n.math={isDegree:!0,acos:function(t){return n.math.isDegree?180/Math.PI*Math.acos(t):Math.acos(t)},add:function(t,e){return t+e},asin:function(t){return n.math.isDegree?180/Math.PI*Math.asin(t):Math.asin(t)},atan:function(t){return n.math.isDegree?180/Math.PI*Math.atan(t):Math.atan(t)},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},asinh:function(t){return Math.log(t+Math.sqrt(t*t+1))},atanh:function(t){return Math.log((1+t)/(1-t))},C:function(t,e){var a,h=1,o=t-e,p=e;for(p<o&&(p=o,o=e),a=p+1;a<=t;a++)h*=a;return h/n.math.fact(o)},changeSign:function(t){return-t},cos:function(t){return n.math.isDegree&&(t=n.math.toRadian(t)),Math.cos(t)},cosh:function(t){return(Math.pow(Math.E,t)+Math.pow(Math.E,-1*t))/2},div:function(t,e){return t/e},fact:function(t){var e,a;if(t%1!=0)return"NaN";for(e=1,a=2;a<=t;a++)e*=a;return e},inverse:function(t){return 1/t},log:function(t){return Math.log(t)/Math.log(10)},mod:function(t,e){return t%e},mul:function(t,e){return t*e},P:function(t,e){var a,n=1;for(a=Math.floor(t)-Math.floor(e)+1;a<=Math.floor(t);a++)n*=a;return n},Pi:function(t,e,a){var n,h=1;for(n=t;n<=e;n++)h*=Number(a.postfixEval({n:n}));return h},pow10x:function(t){for(var e=1;t--;)e*=10;return e},sigma:function(t,e,a){var n,h=0;for(n=t;n<=e;n++)h+=Number(a.postfixEval({n:n}));return h},sin:function(t){return n.math.isDegree&&(t=n.math.toRadian(t)),Math.sin(t)},sinh:function(t){return(Math.pow(Math.E,t)-Math.pow(Math.E,-1*t))/2},sub:function(t,e){return t-e},tan:function(t){return n.math.isDegree&&(t=n.math.toRadian(t)),Math.tan(t)},tanh:function(t){return n.sinha(t)/n.cosha(t)},toRadian:function(t){return t*Math.PI/180}},p=[Math.round,Math.ceil,Math.floor,Math.abs,Math.exp,Math.sqrt,n.math.sin,n.math.cos,n.math.tan,"PI","(",")",n.math.P,n.math.C,n.math.asin,n.math.acos,n.math.atan,"7","8","9",Math.floor,n.math.cosh,n.math.acosh,Math.log,Math.pow,Math.sqrt,"4","5","6",n.math.div,n.math.fact,n.math.tanh,n.math.atanh,n.math.mod,"1","2","3",n.math.mul,n.math.sinh,n.math.asinh,"E",n.math.log,"0",".",n.math.add,n.math.sub,",",n.math.sigma,"n",n.math.Pi,Math.pow],n.prototype.formulaEval=function(){var t,e,a,n,h=[],o=this.value;for(n=0;n<o.length;n++)1===o[n].type||3===o[n].type?h.push({value:3===o[n].type?o[n].show:o[n].value,type:1}):13===o[n].type?h.push({value:o[n].show,type:1}):0===o[n].type?h[h.length-1]={value:o[n].show+("-"!==o[n].show?"(":"")+h[h.length-1].value+("-"!==o[n].show?")":""),type:0}:7===o[n].type?h[h.length-1]={value:(1!==h[h.length-1].type?"(":"")+h[h.length-1].value+(1!==h[h.length-1].type?")":"")+o[n].show,type:7}:10===o[n].type?(t=h.pop(),e=h.pop(),"P"===o[n].show||"C"===o[n].show?h.push({value:"<sup>"+e.value+"</sup>"+o[n].show+"<sub>"+t.value+"</sub>",type:10}):h.push({value:(1!==e.type?"(":"")+e.value+(1!==e.type?")":"")+"<sup>"+t.value+"</sup>",type:1})):2===o[n].type||9===o[n].type?(t=h.pop(),e=h.pop(),h.push({value:(1!==e.type?"(":"")+e.value+(1!==e.type?")":"")+o[n].show+(1!==t.type?"(":"")+t.value+(1!==t.type?")":""),type:o[n].type})):12===o[n].type&&(t=h.pop(),e=h.pop(),a=h.pop(),h.push({value:o[n].show+"("+a.value+","+e.value+","+t.value+")",type:12}));return h[0].value},n.addToken=function(t){var e,a,n,l;for(e=0;e<t.length;e++){if(a=t[e].token.length,n=-1,a<u.length)for(l=0;l<u[a].length;l++)if(t[e].token===u[a][l]){n=h.indexOf(u[a][l]);break}-1===n?(h.push(t[e].token),s.push(t[e].type),u.length<=t[e].token.length&&(u[t[e].token.length]=[]),u[t[e].token.length].push(t[e].token),p.push(t[e].value),o.push(t[e].show)):(h[n]=t[e].token,s[n]=t[e].type,p[n]=t[e].value,o[n]=t[e].show)}},n.lex=function(t,g){var m,w,d,M,x,P,E,b,k,D,I,C,q={value:n.math.changeSign,type:0,pre:21,show:"-"},S={value:")",show:")",type:5,pre:0},N={value:"(",type:4,pre:0,show:"("},R=[N],O=[],T=t,F=0,U=i,W=0,j=v,z="",A={};for(void 0!==g&&n.addToken(g),w=0;w<T.length;w++)if(" "!==T[w]){for(m="",d=T.length-w>u.length-2?u.length-1:T.length-w;d>0;d--)for(M=0;M<u[d].length;M++)a(T,u[d][M],w,d)&&(m=u[d][M],M=u[d].length,d=0);if(w+=m.length-1,""===m)throw new n.Exception("Can't understand after "+T.slice(w));for(x=h.indexOf(m),P=m,E=s[x],b=p[x],k=l[E],D=o[x],I=R[R.length-1],C=O.length;C--&&0===O[C];)if(-1!==[0,2,3,5,9,11,12,13].indexOf(E)){if(!0!==U[E])throw new n.Exception(m+" is not allowed after "+z);R.push(S),U=r,j=c,e(O,-1).pop()}if(!0!==U[E])throw new n.Exception(m+" is not allowed after "+z);if(!0===j[E]&&(E=2,b=n.math.mul,D="&times;",k=3,w-=m.length),A={value:b,type:E,pre:k,show:D},0===E)U=i,j=v,e(O,2).push(2),R.push(A),R.push(N);else if(1===E)1===I.type?(I.value+=b,e(O,1)):R.push(A),U=r,j=f;else if(2===E)U=i,j=v,e(O,2),R.push(A);else if(3===E)R.push(A),U=r,j=c;else if(4===E)F+=O.length,O=[],W++,U=i,j=v,R.push(A);else if(5===E){if(!W)throw new n.Exception("Closing parenthesis are more than opening one, wait What!!!");for(;F--;)R.push(S);F=0,W--,U=r,j=c,R.push(A)}else if(6===E){if(I.hasDec)throw new n.Exception("Two decimals are not allowed in one number");1!==I.type&&(I={value:0,type:1,pre:0},R.push(I),e(O,-1)),U=y,e(O,1),j=v,I.value+=b,I.hasDec=!0}else 7===E&&(U=r,j=c,e(O,1),R.push(A));8===E?(U=i,j=v,e(O,4).push(4),R.push(A),R.push(N)):9===E?(9===I.type?I.value===n.math.add?(I.value=b,I.show=D,e(O,1)):I.value===n.math.sub&&"-"===D&&(I.value=n.math.add,I.show="+",e(O,1)):5!==I.type&&7!==I.type&&1!==I.type&&3!==I.type&&13!==I.type?"-"===P&&(U=i,j=v,e(O,2).push(2),R.push(q),R.push(N)):(R.push(A),e(O,2)),U=i,j=v):10===E?(U=i,j=v,e(O,2),R.push(A)):11===E?(U=i,j=v,R.push(A)):12===E?(U=i,j=v,e(O,6).push(6),R.push(A),R.push(N)):13===E&&(U=r,j=c,R.push(A)),e(O,-1),z=m}for(C=O.length;C--&&0===O[C];)R.push(S),e(O,-1).pop();if(!0!==U[5])throw new n.Exception("complete the expression");for(;W--;)R.push(S);return R.push(S),new n(R)},n.Exception=function(t){this.message=t},n.prototype.toPostfix=function(){var t,e,a,h,o,p,u,s=[],l=[{value:"(",type:4,pre:0}],i=this.value;for(p=1;p<i.length;p++)if(1===i[p].type||3===i[p].type||13===i[p].type)1===i[p].type&&(i[p].value=Number(i[p].value)),s.push(i[p]);else if(4===i[p].type)l.push(i[p]);else if(5===i[p].type)for(;4!==(e=l.pop()).type;)s.push(e);else if(11===i[p].type){for(;4!==(e=l.pop()).type;)s.push(e);l.push(e)}else if(t=i[p],h=t.pre,o=l[l.length-1],a=o.pre,u="Math.pow"===o.value&&"Math.pow"===t.value,h>a)l.push(t);else{for(;a>=h&&!u||u&&h<a;)e=l.pop(),o=l[l.length-1],s.push(e),a=o.pre,u="Math.pow"===t.value&&"Math.pow"===o.value;l.push(t)}return new n(s)},n.prototype.postfixEval=function(t){var e,a,h,o,p,u,s;for((t=t||{}).PI=Math.PI,t.E=Math.E,e=[],p=this.value,u=void 0!==t.n,s=0;s<p.length;s++)1===p[s].type?e.push({value:p[s].value,type:1}):3===p[s].type?e.push({value:t[p[s].value],type:1}):0===p[s].type?void 0===e[e.length-1].type?e[e.length-1].value.push(p[s]):e[e.length-1].value=p[s].value(e[e.length-1].value):7===p[s].type?void 0===e[e.length-1].type?e[e.length-1].value.push(p[s]):e[e.length-1].value=p[s].value(e[e.length-1].value):8===p[s].type?(a=e.pop(),h=e.pop(),e.push({type:1,value:p[s].value(h.value,a.value)})):10===p[s].type?(a=e.pop(),void 0===(h=e.pop()).type?(h.value=h.concat(a),h.value.push(p[s]),e.push(h)):void 0===a.type?(a.unshift(h),a.push(p[s]),e.push(a)):e.push({type:1,value:p[s].value(h.value,a.value)})):2===p[s].type||9===p[s].type?(a=e.pop(),void 0===(h=e.pop()).type?((h=h.concat(a)).push(p[s]),e.push(h)):void 0===a.type?(a.unshift(h),a.push(p[s]),e.push(a)):e.push({type:1,value:p[s].value(h.value,a.value)})):12===p[s].type?(void 0!==(a=e.pop()).type&&(a=[a]),h=e.pop(),o=e.pop(),e.push({type:1,value:p[s].value(o.value,h.value,new n(a))})):13===p[s].type&&(u?e.push({value:t[p[s].value],type:3}):e.push([p[s]]));if(e.length>1)throw new n.exception("Uncaught Syntax error");return e[0].value>1e15?"Infinity":parseFloat(e[0].value.toFixed(15))},n.eval=function(t,e,a){return void 0===e?this.lex(t).toPostfix().postfixEval():void 0===a?void 0!==e.length?this.lex(t,e).toPostfix().postfixEval():this.lex(t).toPostfix().postfixEval(e):this.lex(t,e).toPostfix().postfixEval(a)},t.tcmexp=n}(window);